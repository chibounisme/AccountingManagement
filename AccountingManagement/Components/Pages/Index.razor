@page "/"
@attribute [Authorize]
@inject IStringLocalizer<AppStrings> Localizer
@inject AuthenticationStateProvider AuthenticationStateProvider

<PageTitle>@Localizer["DashboardPageTitle"]</PageTitle>

<div class="page-header">
    <h1>@Localizer["DashboardPageTitle"]</h1>
</div>

<p>@Localizer["WelcomeMessage", _userName ?? "..."]</p>

<div class="dashboard-summary">
    <div class="summary-card">
        <h3>@Localizer["MenuCompanies"]</h3>
        <p>@Localizer["ManageYourClientCompanies"]</p>
        <NavLink href="companies" class="btn btn-secondary">@Localizer["GoToCompanies"]</NavLink>
    </div>

    <AuthorizeView Roles="Admin">
        <div class="summary-card">
            <h3>@Localizer["MenuAccountants"]</h3>
            <p>@Localizer["ManageAccountantUsers"]</p>
            <NavLink href="admin/accountants" class="btn btn-secondary">@Localizer["GoToAccountants"]</NavLink>
        </div>
    </AuthorizeView>
</div>


@code {
    private string? _userName;

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        if (user.Identity != null && user.Identity.IsAuthenticated)
        {
            _userName = user.Identity.Name; // Or use a claim for FullName
        }
        // Add "WelcomeMessage", "ManageYourClientCompanies", "GoToCompanies", etc. to RESX files
    }
}